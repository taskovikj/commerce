{% extends "auctions/layout.html" %}

{% block body %}
    <h2>{{ listing.title }}</h2>
    <p>Description: {{ listing.description }}</p>
    <p>Starting Price: ${{ listing.starting_price }}</p>
    <p>Current Price: ${{ listing.current_price }}</p>
    {% if listing.image_url %}
        <img src="{{ listing.image_url }}" alt="{{ listing.title }}" style="max-width: 200px;">
    {% endif %}
    <p>Creator: {{ listing.creator }}</p>
    <p>Categories:
        {% for category in listing.categories.all %}
            {{ category.name }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </p>

    <h2>Comments:</h2>
    {% for comment in listing.comments.all %}
        <p>{{ comment.text }} (by {{ comment.user.username }})</p>
    {% empty %}
        <p>No comments yet.</p>
    {% endfor %}

    <h2>Add Comment:</h2>
    <form method="post" action="{% url 'add_comment_to_listing' listing.id %}">
        {% csrf_token %}
        <textarea name="text" cols="30" rows="4"></textarea>
        <input type="submit" value="Add Comment">
    </form>
{% endblock %}
